<!DOCTYPE html>
<html lang="en">
<head>

    <title>Labs Angular</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Merriweather:400,300,700" rel="stylesheet" type="text/css">

    <link type="text/css" rel="stylesheet" href="assets/styles/materialize.min.css" media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="assets/styles/github-markdown.css" />
    <link type="text/css" rel="stylesheet" href="assets/styles/github.css" />
    <link type="text/css" rel="stylesheet" href="assets/styles/glyph.css" />
    <link type="text/css" rel="stylesheet" href="assets/styles/main.css" />

</head>
<body>


<header class="navbar-fixed">

    <nav class="navbar">
        <div class="nav-wrapper">
            <a href="http://valtech.fr" class="brand-logo hide-on-med-and-down">
                <i class="valtech-logo--header glyph" data-icon="valtech-logo" aria-hidden="true"></i>
            </a>

            <a class="brand-logo center">
                Labs Angular
            </a>

            <a href="#" data-activates="global-menu-mobile" class="button-collapse"><i class="material-icons">menu</i></a>

            <ul class="right">
                <li>
                    <a href="https://github.com/NodeAndTyped/labs-angular/" title="See on github">
                        <i class="material-icons">visibility</i>
                    </a>
                </li>

                <li class="hide-on-med-and-down">
                    <a href="#!" class="dropdown-button" title="download" data-activates="global-menu-download" data-beloworigin="true">
                        <i class="material-icons">file_download</i>
                    </a>
                </li>

                <li class="hide-on-med-and-down">
                    <a class="dropdown-button" href="#!" data-activates="global-menu" data-beloworigin="true">
                        <i class="material-icons">menu</i>
                    </a>
                </li>
            </ul>


        </div>
    </nav>

</header>

<ul class="side-nav" id="global-menu-mobile">

    <li class="logo">

        <i class="valtech-logo--header glyph" data-icon="valtech-logo" aria-hidden="true"></i>

    </li>

    
            <li><a href="index.html">Accueil</a></li>
        
            <li><a href="tp1-installation.html">TP 1 - Installation</a></li>
        
            <li><a href="tp2-composant-pipe.html">TP 2 - Le composant Chronomètre</a></li>
        
            <li><a href="tp3-communication-entres-composants.html">TP 3 - Communication entres composants</a></li>
        
            <li><a href="tp4-formulaires-routes.html">TP 4 - Formulaires et routes</a></li>
        
            <li><a href="tp5-webservice.html">TP 5 - Intégration des webservices</a></li>
        
            <li><a href="tp6-programmation-reactive-websocket.html">TP 6 - Programmation reactive et websocket</a></li>
        

    <li><div class="divider"></div></li>

    <li class="no-padding">
        <ul class="collapsible collapsible-accordion">
            <li>
                <a class="collapsible-header">Télécharger<i class="material-icons">arrow_drop_down</i></a>
                <div class="collapsible-body">
                    <ul>

                        <li>
                            <a href="https://github.com/NodeAndTyped/labs-angular/zipball/master">
                                Documentation (master)
                            </a>
                        </li>

                        
                                <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp1-solution.zip">tp1-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp2-solution.zip">tp2-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp3-solution.zip">tp3-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp4-solution.zip">tp4-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp5-solution.zip">tp5-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp6-solution.zip">tp6-solution</a></li>
                            
                    </ul>
                </div>
            </li>
        </ul>
    </li>

</ul>

<ul id="global-menu" class="dropdown-menu dropdown-content">
    
            <li><a href="index.html">Accueil</a></li>
        
            <li><a href="tp1-installation.html">TP 1 - Installation</a></li>
        
            <li><a href="tp2-composant-pipe.html">TP 2 - Le composant Chronomètre</a></li>
        
            <li><a href="tp3-communication-entres-composants.html">TP 3 - Communication entres composants</a></li>
        
            <li><a href="tp4-formulaires-routes.html">TP 4 - Formulaires et routes</a></li>
        
            <li><a href="tp5-webservice.html">TP 5 - Intégration des webservices</a></li>
        
            <li><a href="tp6-programmation-reactive-websocket.html">TP 6 - Programmation reactive et websocket</a></li>
        
</ul>


<ul id="global-menu-download" class="dropdown-menu dropdown-content">
    <li>
        <a href="https://github.com/NodeAndTyped/labs-angular/zipball/master">
            Télécharger la documentation (master)
        </a>
    </li>

    <li class="divider"></li>

    
            <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp1-solution.zip">Télécharger tp1-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp2-solution.zip">Télécharger tp2-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp3-solution.zip">Télécharger tp3-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp4-solution.zip">Télécharger tp4-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp5-solution.zip">Télécharger tp5-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp6-solution.zip">Télécharger tp6-solution</a></li>
        

</ul>

<div class="container container-body">
    <article class="markdown-body">
        <h1>TP 4</h1>
<blockquote>
<p>Formulaires et routes</p>
</blockquote>
<p>Dans ce TP, nous allons créer les formulaires de connexion et d'authentification.
Pour ce faire nous aurons besoin de mettre en place la module de routage d'Angular
pour afficher plusieurs pages.</p>
<h2>Installation</h2>
<p>Installez le module <code>@angular/router</code> avec la commande suivante :</p>
<pre><code class="bash">npm install --save @angular/router
</code></pre>
<h2>Création des pages et des routes</h2>
<p>Nous devons maintenant créer les composants
Déclarez ensuite les routes dans un nouveau fichier <code>app.routes.ts</code>. Nous devrons créer les routes suivantes :</p>
<table>
<thead>
<tr>
<th>Page</th>
<th>Route</th>
<th>Composant</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Accueil</td>
<td>/</td>
<td>HomeComponent</td>
<td>Affiche un message de bienvenue avec un bouton redirigeant l'utilisateur vers la page de connexion. Une fois authentifié, cette page affiche la liste des utilisateurs.</td>
</tr>
<tr>
<td>Login</td>
<td>/login</td>
<td>LoginComponent</td>
<td>Formulaire d'authentification</td>
</tr>
<tr>
<td>Signup</td>
<td>/signup</td>
<td>SignupComponent</td>
<td>Formulaire d'inscription</td>
</tr>
</tbody>
</table>
<ol>
<li>Commencez par créer les composants énoncés dans le tableau. </li>
<li>Ensuite, vous devrez écrire vos routes dans le fichier <code>app.routes.ts</code> en fonction de tableau ci-dessus.</li>
<li>Importez vos routes dans votre application <code>app.module.ts</code>comme suivant :</li>
</ol>
<pre><code class="typescript">import { ROUTES } from "./app.routes";
import { RouterModule } from "@angular/router";

@NgModule({
    ...
    imports: [
        RouterModule.forRoot(ROUTES)
    ],
    ...
}
</code></pre>
<p>Enfin vous devez indiquer au routeur où seront affichées les vues dans votre application.</p>
<pre><code class="html">&#x3C;router-outlet>&#x3C;/router-outlet>
</code></pre>
<h3>Page d'accueil</h3>
<p>La page d'accueil devra afficher la liste des utilisateurs une fois authentifié.
Commencez par réintégrer la liste des utilisateurs dans HomeComponent. Nous nous occuperons des règles d'affichage plus tard.</p>
<h3>Page d'authentification</h3>
<p>Nous allons maintenant utiliser les API Formulaires d'Angular. Nous utiliserons ici les <code>formulaires pilotés par le template</code>
mais vous êtes libre d'utiliser la seconde approche.</p>
<p>Le formulaire de connexion présentera les éléments suivants :</p>
<ul>
<li>Un champ e-mail, qui est un champ obligatoire et doit respecter le pattern e-mail,</li>
<li>Un champ mot de passe, qui est un champ obligatoire,</li>
<li>Un bouton de connexion, actif que si toutes les données saisies sont valides,</li>
<li>Un bouton <code>ou m'enregister</code> pour rediriger l'utilisateur vers la page d'inscription.</li>
</ul>
<p>N'oubliez pas d'afficher les messages en fonction du type d'erreur du champs associé.</p>
<p>Voici un exemple du formulaire attendu en Material :</p>
<p><img src="images/login.png" alt="max-300"> </p>
<h3>Le service Authenticate</h3>
<p>Une fois le formulaire réalisé, vous devrez créer le service <code>AuthenticateService</code> (<code>ng g service authenticate</code>) qui aura pour fonction d'authentifier
l'utilisateur.</p>
<p>Ce service exposera les méthodes suivantes :</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Descripton</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>authenticate(email: string, password: string): boolean</code></td>
<td>Permet d'authentifier l'utilisateur. Stocke l'utilisateur dans le 
<code>localStorage</code>
 et émet un événement sur le flux 
<code>onSignin</code>
.</td>
</tr>
<tr>
<td><code>logout()</code></td>
<td>Supprimer les infos stocker dans le 
<code>localStorage</code>
 et émet un événement sur le flux onLogout.</td>
</tr>
<tr>
<td><code>getUser()</code></td>
<td>Retourne l'utilisateur connecté et stocké dans le localStorage.</td>
</tr>
<tr>
<td><code>get onSignin(): EventEmitter&#x3C;User></code></td>
<td>Retourne l'objet (ou flux) 
<code>EventEmmiter</code>
 dédié à l'événement onSignin.</td>
</tr>
<tr>
<td><code>get onLogout(): EventEmitter&#x3C;boolean></code></td>
<td>Retourne l'objet (ou flux) 
<code>EventEmmiter</code>
 dédié à l'événement onLogout.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Nous utiliserons la class EventEmitter pour permettre à des composants de s'abonner à des événements.</p>
</blockquote>
<h4>Utilisation du localStorage</h4>
<pre><code class="typescript">// setter
localStorage.setItem("currentUsers", JSON.stringify({firstName: "John"}));
// getter
const user = JSON.parse(localStorage.getItem("currentUsers"));
</code></pre>
<h3>La page d'accueil (fin)</h3>
<p>Maintenant que vous avez un service AuthenticateService de prêt, vous pouvez gérer les règles d'affichage de cette page !</p>
<h3>Page d'inscription</h3>
<p>Le formulaire d'inscription présentera les éléments suivants :</p>
<ul>
<li>Prénom, qui est un champ obligatoire, </li>
<li>Nom, qui est un champ obligatoire, </li>
<li>Un champ e-mail, qui est un champ obligatoire et doit respecter le pattern e-mail,</li>
<li>Un champ mot de passe, qui est un champ obligatoire,</li>
<li>Un bouton de enregistrer, actif que si toutes les données saisies sont valides,</li>
</ul>
<p>Ensuite rajouter les fonctions permettant d'ajouter un utilisateur dans liste d'utilisateurs du service <code>UserService</code>.</p>
<h3>La navbar (bonus)</h3>
<p>Une application est toujours plus belle lorsque cette dernière possède une <code>navbar</code>.</p>
<p>Cette navbar devra s'afficher sur l'ensemble des pages. Elle devra afficher les liens suivants :</p>
<ul>
<li>Home,</li>
<li>Signin lorsque aucun utilisateur n'est authentifié,</li>
<li>Signout lorsqu'un utilisateur est authentifié.</li>
</ul>
<p>Pour vous aider, vous pouvez utiliser la librairie Material <a href="http://material.angular.io">http://material.angular.io</a>.</p>
<blockquote>
<p>Correction du TP : <a href="resources/tp4-solution.zip">tp4-solution</a></p>
</blockquote>
<p><a href="tp5-webservice.html">Suivant</a></p>

    </article>
</div>

<footer class="page-footer">

    <div class="container">

        <div class="row">
            <div class="col l12 s12">
                <p><a href="mailto:info@valtech.fr">info@valtech.fr</a></p>
                <p>Vous avez une vision concernant l'avenir digital de votre entreprise ? N'hésitez pas à nous contacter.</p>
                <p>Tél : 01 76 21 15 00</p>
                <p class="foot__offices">
                    <span>Aarhus | Amserfoort | Amsterdam | Bangalore | Bristol | Buenos Aires | Chicago | Copenhagen | Dallas | Düsseldorf | Eindhoven | Frankfurt | Geneva | Gurgaon | Göteborg | Honolulu | London | Malmö | Manchester | Montreal | Munich | New York | Paris | Singapore | Stockholm | Sydney | Uppsala | Utrecht | Västerås</span>
                </p>
            </div>
        </div>

        <div class="footer-social">
            <ul>
                <li><a href="https://www.facebook.com/valtech.fr"><i class="glyph" data-icon="facebook" title="Suivez-nous à facebook" aria-hidden="true"></i><span class="hidden">facebook</span></a></li>
                <li><a href="https://www.linkedin.com/company/valtech"><i class="glyph" data-icon="linkedin" title="Suivez-nous à linkedin" aria-hidden="true"></i><span class="hidden">linkedin</span></a></li>
                <li><a href="https://www.instagram.com/valtech_fr/"><i class="glyph" data-icon="instagram" title="Suivez-nous à instagram" aria-hidden="true"></i><span class="hidden">instagram</span></a></li>
                <li><a href="https://twitter.com/Valtech_FR"><i class="glyph" data-icon="twitter" title="Suivez-nous à twitter" aria-hidden="true"></i><span class="hidden">twitter</span></a></li>
            </ul>
        </div>



    </div>

    <div class="footer-copyright">
        <div class="container">

            © Valtech 2016

            <a  class="grey-text text-lighten-4 right"  href="http://valtech.fr/services/mentions-legales-cgu/">
                Mentions légales / CGU
            </a>

            </ul>
        </div>
    </div>

</footer>

<script type="text/javascript" src="assets/scripts/jquery.min.js"></script>
<script type="text/javascript" src="assets/scripts/materialize.min.js"></script>
<script type="text/javascript" src="assets/scripts/highlight.pack.js"></script>

<script>
    $( document ).ready(function(){
        $(".button-collapse").sideNav();
        $(".dropdown-button").dropdown();
    });
</script>


<script>
    hljs.initHighlightingOnLoad();
</script>

</body>
</html>