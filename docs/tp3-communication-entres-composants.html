<!DOCTYPE html>
<html lang="en">
<head>

    <title>Labs Angular</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Merriweather:400,300,700" rel="stylesheet" type="text/css">

    <link type="text/css" rel="stylesheet" href="assets/styles/materialize.min.css" media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="assets/styles/github-markdown.css" />
    <link type="text/css" rel="stylesheet" href="assets/styles/github.css" />
    <link type="text/css" rel="stylesheet" href="assets/styles/glyph.css" />
    <link type="text/css" rel="stylesheet" href="assets/styles/main.css" />

</head>
<body>


<header class="navbar-fixed">

    <nav class="navbar">
        <div class="nav-wrapper">
            <a href="http://valtech.fr" class="brand-logo hide-on-med-and-down">
                <i class="valtech-logo--header glyph" data-icon="valtech-logo" aria-hidden="true"></i>
            </a>

            <a class="brand-logo center">
                Labs Angular
            </a>

            <a href="#" data-activates="global-menu-mobile" class="button-collapse"><i class="material-icons">menu</i></a>

            <ul class="right">
                <li>
                    <a href="https://github.com/NodeAndTyped/labs-angular/" title="See on github">
                        <i class="material-icons">visibility</i>
                    </a>
                </li>

                <li class="hide-on-med-and-down">
                    <a href="#!" class="dropdown-button" title="download" data-activates="global-menu-download" data-beloworigin="true">
                        <i class="material-icons">file_download</i>
                    </a>
                </li>

                <li class="hide-on-med-and-down">
                    <a class="dropdown-button" href="#!" data-activates="global-menu" data-beloworigin="true">
                        <i class="material-icons">menu</i>
                    </a>
                </li>
            </ul>


        </div>
    </nav>

</header>

<ul class="side-nav" id="global-menu-mobile">

    <li class="logo">

        <i class="valtech-logo--header glyph" data-icon="valtech-logo" aria-hidden="true"></i>

    </li>

    
            <li><a href="index.html">Accueil</a></li>
        
            <li><a href="tp1-installation.html">TP 1 - Installation</a></li>
        
            <li><a href="tp2-composant-pipe.html">TP 2 - Le composant Chronomètre</a></li>
        
            <li><a href="tp3-communication-entres-composants.html">TP 3 - Communication entres composants</a></li>
        
            <li><a href="tp4-formulaires-routes.html">TP 4 - Formulaires et routes</a></li>
        
            <li><a href="tp5-webservice.html">TP 5 - Intégration des webservices</a></li>
        
            <li><a href="tp6-programmation-reactive-websocket.html">TP 6 - Programmation reactive et websocket</a></li>
        

    <li><div class="divider"></div></li>

    <li class="no-padding">
        <ul class="collapsible collapsible-accordion">
            <li>
                <a class="collapsible-header">Télécharger<i class="material-icons">arrow_drop_down</i></a>
                <div class="collapsible-body">
                    <ul>

                        <li>
                            <a href="https://github.com/NodeAndTyped/labs-angular/zipball/master">
                                Documentation (master)
                            </a>
                        </li>

                        
                                <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp1-solution.zip">tp1-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp2-solution.zip">tp2-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp3-solution.zip">tp3-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp4-solution.zip">tp4-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp5-solution.zip">tp5-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp6-solution.zip">tp6-solution</a></li>
                            
                    </ul>
                </div>
            </li>
        </ul>
    </li>

</ul>

<ul id="global-menu" class="dropdown-menu dropdown-content">
    
            <li><a href="index.html">Accueil</a></li>
        
            <li><a href="tp1-installation.html">TP 1 - Installation</a></li>
        
            <li><a href="tp2-composant-pipe.html">TP 2 - Le composant Chronomètre</a></li>
        
            <li><a href="tp3-communication-entres-composants.html">TP 3 - Communication entres composants</a></li>
        
            <li><a href="tp4-formulaires-routes.html">TP 4 - Formulaires et routes</a></li>
        
            <li><a href="tp5-webservice.html">TP 5 - Intégration des webservices</a></li>
        
            <li><a href="tp6-programmation-reactive-websocket.html">TP 6 - Programmation reactive et websocket</a></li>
        
</ul>


<ul id="global-menu-download" class="dropdown-menu dropdown-content">
    <li>
        <a href="https://github.com/NodeAndTyped/labs-angular/zipball/master">
            Télécharger la documentation (master)
        </a>
    </li>

    <li class="divider"></li>

    
            <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp1-solution.zip">Télécharger tp1-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp2-solution.zip">Télécharger tp2-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp3-solution.zip">Télécharger tp3-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp4-solution.zip">Télécharger tp4-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp5-solution.zip">Télécharger tp5-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-angular/archive/tp6-solution.zip">Télécharger tp6-solution</a></li>
        

</ul>

<div class="container container-body">
    <article class="markdown-body">
        <h1>TP 3</h1>
<blockquote>
<p>Communication entres composants</p>
</blockquote>
<p>Dans ce TP, nous allons créer un tableau contenant la liste des utilisateurs
avec leur statut en ligne. </p>
<p>Pour rappel, la structure initiale du projet est la suivante :</p>
<pre><code class="bash">src/app
├── app.component.css
├── app.component.html
├── app.component.spec.ts
├── app.component.ts
└── app.module.ts
</code></pre>
<h2>Le service Users</h2>
<p>Nous allons créer notre 1er service. Nous allons partir de principe que l'application va évoluer dans le temps et donc nos services
aussi. Par exemple, notre service <code>UsersService</code> va exposer un ensemble de méthode dont la liste des utilisateurs.
Généralement ces informations sont exposés par un web service. Dans l'immédiat nous n'en avons pas, mais nous ferons tout comme !</p>
<p>Nous allons donc créer deux classes, la première sera un <code>FakeUsersService</code> et la seconde sera un <code>UsersService</code> (notre cible).
Ces deux classes implémenterons l'interface <code>IUsersService</code> comme suivant :</p>
<pre><code class="typescript">export const Status: {[K in string]: K} = {
    online: "online",
    offline: "offline",
    busy: "busy"
};

export type Status = keyof typeof Status;

export class UserCredential {
    email: string;
    password: string;
}

export class User extends UserCredential {
    id: number;
    firstName: string;
    lastName: string;
    status: Status;
}

export interface IUsersService {
    getUsers(): Promise&#x3C;User[]>;
    create(user: User): Promise&#x3C;User>;
    exists(email: string): Promise&#x3C;boolean>;
    get(email: string): Promise&#x3C;User>;
}
</code></pre>
<p>Commencez par créer le UsersService avec @angular/cli :</p>
<pre><code class="bash">ng g service services/users
</code></pre>
<p>Ensuite, créez le fichier <code>users.interface.ts</code> ainsi que la fichier <code>users.fake.service.ts</code>.
Et enfin implémentez la méthode <code>getUsers()</code> (les autres méthodes seront développés plus tard).</p>
<p>La méthode <code>FakeUsersService.getUsers()</code> devra retourner les données suivantes :</p>
<pre><code class="json">[
    {"id": 1, "email": "john.doe@gmail.com", "password": "12345", "status": "online"},
    {"id": 2, "email": "jane.doe@gmail.com", "password": "12345", "status": "online"},
    {"id": 3, "email": "jean.dupond@gmail.com", "password": "12345", "status": "busy"},
    {"id": 4, "email": "jean.dupont@gmail.com", "password": "12345", "status": "offline"},
    {"id": 5, "email": "jeanne.dupond@gmail.com", "password": "12345", "status": "offline"},
    {"id": 6, "email": "joe.doe@gmail.com", "password": "12345", "status": "online"}
]
</code></pre>
<p>Une fois votre service fake implémenté, n'oubliez pas de l'ajouter à la liste des providers de votre module. </p>
<blockquote>
<p>Aidez-vous du cours pour savoir comment ajouter un service mocké dans un module Angular.</p>
</blockquote>
<p>Pour terminer, appelez la méthode getUser() dans le composant AppComponent et vérifiez que cela fonctionne.</p>
<h2>Le composant tableau des utilisateurs</h2>
<p>Nous allons maintenant créer un composant qui va afficher la liste des utilisateurs sous forme de tableau.
Commencez par créer le composant <code>UsersTable</code> avec la commande suivante :</p>
<pre><code class="bash">ng g component user-table
</code></pre>
<p>Voici ce qui est attendu du composant, nous devons pouvoir l'utiliser de la façon suivante :</p>
<pre><code class="html">&#x3C;app-users-table [users]="users">&#x3C;/app-users-table>
</code></pre>
<h3>Exercice 1</h3>
<p>Avec ce que vous avez vue en cours sur les données d'entrées d'un composant avec <code>@Input()</code>, essayez d'afficher la liste des utilisateurs
au format json dans le contenu du composant UsersTable dans un premier temps.</p>
<h3>Exercice 2</h3>
<p>Maintenant que vous avez les données construisez votre composant. Voici un exemple du tableau attendu :</p>
<p><img src="images/users-table.png" alt="max-300"> </p>
<p>La feuille de style pour vous aider :</p>
<pre><code class="css">table {
    border-collapse: collapse;
    border-spacing: 0;
}

table {
    width: 100%;
    display: table;
}

thead {
    border-bottom: 1px solid #d0d0d0;
}

th {
    padding: 15px 5px;
    display: table-cell;
    text-align: left;
    vertical-align: middle;
    border-radius: 2px;
}
</code></pre>
<p>Vous devez donc compléter la feuille de style afin d'afficher :</p>
<ul>
<li>Les lignes pairs en fonds gris clair,</li>
<li>Le texte <code>online</code> en vert,</li>
<li>Le texte <code>offline</code> en gris clair,</li>
<li>Le texte <code>busy</code> en rouge.</li>
</ul>
<p>Ensuite utilisez les intructions vue en cours pour afficher la liste des utilisateurs dans votre tableau.</p>
<p>Enfin, ajoutez une checkbox (md-checkbox) permettant d'afficher soit les utilisateurs en ligne,
soit tous les utilisateurs.</p>
<h2>Communication entres composants</h2>
<p>Notre tableau affiche désormais les données. Nous allons maintenant utiliser l'annotation <code>@Output</code> pour émettre
un événement lorsque l'utilisateur clique sur le bouton correspondant à la ligne de l'utilisateur.
Cet événement sera remonté vers le composant <code>AppComponent</code>.</p>
<p>Une fois l'information de l'utilisateur remonté dans <code>AppComponent</code>, vous devrez afficher les informations de l'utilisateur
dans une boite de dialogue (soit via une alert ou en utilisant la librairie <a href="https://material.angular.io/components/component/dialog">Material design</a>).</p>
<p><img src="images/user-table-and-popin.png" alt="max-300"> </p>
<h2>Conclusion</h2>
<p>Ce TP vous aura appris à :</p>
<ul>
<li>Utiliser les directives intégrées à Angular (<em>ngIf, </em>ngFor),</li>
<li>Créer un service Angular et l'injecter dans un composant,</li>
<li>Créer des composants avec une relation parent-enfant,</li>
<li>Créer et utiliser un template,</li>
<li>Communiquer entres les composants.</li>
</ul>
<blockquote>
<p>Correction du TP : <a href="resources/tp3-solution.zip">tp3-solution</a></p>
</blockquote>
<p><a href="tp4-formulaires-routes.html">Suivant</a></p>

    </article>
</div>

<footer class="page-footer">

    <div class="container">

        <div class="row">
            <div class="col l12 s12">
                <p><a href="mailto:info@valtech.fr">info@valtech.fr</a></p>
                <p>Vous avez une vision concernant l'avenir digital de votre entreprise ? N'hésitez pas à nous contacter.</p>
                <p>Tél : 01 76 21 15 00</p>
                <p class="foot__offices">
                    <span>Aarhus | Amserfoort | Amsterdam | Bangalore | Bristol | Buenos Aires | Chicago | Copenhagen | Dallas | Düsseldorf | Eindhoven | Frankfurt | Geneva | Gurgaon | Göteborg | Honolulu | London | Malmö | Manchester | Montreal | Munich | New York | Paris | Singapore | Stockholm | Sydney | Uppsala | Utrecht | Västerås</span>
                </p>
            </div>
        </div>

        <div class="footer-social">
            <ul>
                <li><a href="https://www.facebook.com/valtech.fr"><i class="glyph" data-icon="facebook" title="Suivez-nous à facebook" aria-hidden="true"></i><span class="hidden">facebook</span></a></li>
                <li><a href="https://www.linkedin.com/company/valtech"><i class="glyph" data-icon="linkedin" title="Suivez-nous à linkedin" aria-hidden="true"></i><span class="hidden">linkedin</span></a></li>
                <li><a href="https://www.instagram.com/valtech_fr/"><i class="glyph" data-icon="instagram" title="Suivez-nous à instagram" aria-hidden="true"></i><span class="hidden">instagram</span></a></li>
                <li><a href="https://twitter.com/Valtech_FR"><i class="glyph" data-icon="twitter" title="Suivez-nous à twitter" aria-hidden="true"></i><span class="hidden">twitter</span></a></li>
            </ul>
        </div>



    </div>

    <div class="footer-copyright">
        <div class="container">

            © Valtech 2016

            <a  class="grey-text text-lighten-4 right"  href="http://valtech.fr/services/mentions-legales-cgu/">
                Mentions légales / CGU
            </a>

            </ul>
        </div>
    </div>

</footer>

<script type="text/javascript" src="assets/scripts/jquery.min.js"></script>
<script type="text/javascript" src="assets/scripts/materialize.min.js"></script>
<script type="text/javascript" src="assets/scripts/highlight.pack.js"></script>

<script>
    $( document ).ready(function(){
        $(".button-collapse").sideNav();
        $(".dropdown-button").dropdown();
    });
</script>


<script>
    hljs.initHighlightingOnLoad();
</script>

</body>
</html>